<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>No Signal</title>

    <style>
    body {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: verdana;
    }
    .container {
        display: flex;
        flex-direction: column;
        height: 100vh;
    }
    .screensaver {
        height: 100vh;
        width: 100%;
        background-color: blue;
        z-index: 2;
        position: absolute;
        top:0;
        left:0;
        flex:1;
        opacity: 0;
        transition: opacity .5s linear;
    }
    .nosignal {
        height: 70px;
        width: 200px;
        background: rgb(3, 3, 129);
        border: 3px solid white;
        color: #fff;
        padding: 15px;
        position: absolute;
        margin: auto;
        top: 0;
        bottom: 0;
        left:0;
        right: 0;
        font-size: 25px;
        box-sizing: border-box;
        transition: top 5s linear,left 5s linear;
    }
    .text{
        text-align: center
    }

    .info {
        z-index: 1;
        
        //align-items: center;
        justify-self: center;
        
        
    }
    </style>

</head>
<body>
    
    <div class="container">
        
        <div class="info">
            <h1 align="center">
                The ScreenSaver is activated when idle for 5 secs...
            </h1>
            <p align="center">
                Currently idle for <span id="counter">0</span> second(s)
            </p>
        </div>
        <div class="screensaver">
            <div class="nosignal">
                <div class="text">NO SIGNAL</div>
            </div>
        </div>

    </div>

    

    <script>
        //move the no signal box on intervals
        let interval = 2000, idleLimit = 5000, idleCount = 0
        let screensaver = document.querySelector('.screensaver'), nosignal = document.querySelector('.nosignal')
        let min = 10, maxHeight = 100 - (min*2), maxWidth = 100 - (min*2)
        let idleTimer,timer,randomY,randomX;
        

        // DOM Events - run functions when events occur
        window.onload = stopIdleCounter;
        document.onmousemove = stopIdleCounter;
        document.onmousedown = stopIdleCounter;
        document.ontouchstart = stopIdleCounter;
        document.onclick = stopIdleCounter;
        document.onscroll = stopIdleCounter;
        document.onkeypress = stopIdleCounter;

        //console.log(idleCount)
        //if no activity after specified time, run screensaver
        function activateScreenSaver() {
            if (idleCount === idleLimit) 
            {
                //enable screensaver
                screensaver.style.opacity= '1'
                timer = setInterval(startScreenSaver,interval)
            }
        }

        function runIdleCounter() 
        {
            idleTimer = setInterval(idleCounter,1000)
        }
        function idleCounter() 
        {
            idleCount += 1000; 
            //show user how long idle for
            document.getElementById('counter').innerHTML = idleCount/1000;
            //run screensaver
            activateScreenSaver();
            //console.log(idleCount)
        }
        function stopIdleCounter() 
        {
            idleCount=0
            clearInterval(idleTimer)
            removeScreenSaver()
            runIdleCounter()
        }

        //clear timer if activity resumes
        function removeScreenSaver() {
            screensaver.style.opacity= '0'
            clearInterval(timer)
        }

        function startScreenSaver() {
            //run repeatedly
            

            randomY = Math.floor( Math.random() * ( document.body.offsetHeight - nosignal.offsetHeight ) ) + 1
            randomX = Math.floor( Math.random() * ( document.body.offsetWidth - nosignal.offsetWidth ) ) + 1

           
            console.log('x: ',randomX)
            console.log('y: ',randomY)

            //nosignal.style.transform = 'translate('+randomX+'px,'+randomY+'px)'
            nosignal.style.top = randomY+'px'
            nosignal.style.left = randomX+'px'
            nosignal.style.margin = 0

        }

        

        

        
    </script>
</body>
</html>